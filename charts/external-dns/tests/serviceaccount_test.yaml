suite: ServiceAccount configuration
templates:
  - serviceaccount.yaml
release:
  namespace: default
tests:
  - it: should provide a single service account by default
    asserts:
      - matchSnapshot: {}
      - isKind:
            of: ServiceAccount
      - hasDocuments:
          count: 1
      - equal:
          path: automountServiceAccountToken
          value: null

  - it: should provide a way to disable service account
    set:
      serviceAccount:
        create: false
    asserts:
      - hasDocuments:
          count: 0
